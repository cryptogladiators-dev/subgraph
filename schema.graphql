enum WalletType {
  GAME
  PLAYER
}

enum ItemTransactionType {
  SINGLE
  BATCH
}

type WalletOwnedItem @entity {
  id: ID!
  wallet: Wallet!
  item: Item!
  amount: BigInt!
}

type Wallet @entity {
  id: ID!
  type: WalletType!
  paidBUSD: [BUSDTransaction!]! @derivedFrom(field: "from")
  receivedBUSD: [BUSDTransaction!]! @derivedFrom(field: "to")
  ownedItems: [WalletOwnedItem!]! @derivedFrom(field: "wallet")
}

type BUSDTransaction @entity(immutable: true) {
  id: ID!
  value: BigInt!
  from: Wallet!
  to: Wallet!
  createdAt: BigInt!
  blockNumber: Int!
}

type Item @entity {
  id: ID!
  total: BigInt!
  inStock: BigInt!
  transactions: [ItemTransaction!]! @derivedFrom(field: "items")
}

type ItemTransaction @entity(immutable: true) {
  id: ID!
  from: Wallet!
  to: Wallet!
  items: [Item!]!
  values: [BigInt!]!
  type: ItemTransactionType!
  createdAt: BigInt!
  blockNumber: Int!
}
